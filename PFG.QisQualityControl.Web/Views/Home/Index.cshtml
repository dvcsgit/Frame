@{
    //使用者管理
    var title = "首頁";
    UserModel userModel = ViewBag.UserModel;
    var menu = Menu.GetSubMenu(HttpContext.Current);
}

@section BreadCrumbs{
    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
        </script>
        <ul class="breadcrumb">
            <li class="active">
                <i class="ace-icon fa fa-home home-icon"></i>
                <a href="@Url.Action("Index")">@title</a>
            </li>
        </ul>
    </div>
}


<div id="item-index">
    <h3 class="header smaller lighter blue">系統導覽</h3>

    <section id="sitemap-section">
        @{
            int idx = 1;
            foreach (var item in menu)
            {
                if (idx % 3 == 1)
                {
                    <text>@Html.Raw("<div class=\"row\">")</text>
                }
                <div class="col-md-4">
                    <h2><i class="menu-icon fa @item.Value.Icon"></i> @item.Value.Name</h2>
                    <hr>
                    <ul class="list-unstyled spaced2">
                        @if (item.Value.Childrens.Count == 0)
                        {
                            <text>
                                <li><a href="#"><h4>@item.Value.Name</h4></a></li>
                            </text>
                        }
                        else
                        {
                            foreach (var subMenu in item.Value.Childrens.OrderByDescending(x => x.Weight))
                            {
                                if (subMenu.ParentId == "XXX")
                                {

                                    <li><a href="@subMenu.Controller" target="_blank">@subMenu.Name</a></li>

                                }
                                else
                                {
                                    if (subMenu.Action == "#")
                                    {
                                        <li><a href="@string.Format("http://{0}{1}",subMenu.Controller,subMenu.Url)" target="_blank"><h4>@subMenu.Name</h4></a></li>
                                    }
                                    else if (string.IsNullOrEmpty(subMenu.Url))
                                    {
                                        <li><a href="@Url.Action(subMenu.Action, subMenu.Controller)"> <h4>@subMenu.Name</h4></a></li>
                                    }
                                    else
                                    {
                                        <li><a href="@(Url.Action(subMenu.Action, subMenu.Controller)+subMenu.Url)" target="_blank"><h4>@subMenu.Name</h4></a></li>
                                    }
                                }
                            }
                        }
                    </ul>
                </div>
                if (idx % 3 == 0 || idx == menu.Count)
                {
                    <text>@Html.Raw("</div>")</text>
                }
                idx++;
            }
        }
    </section>


    <div class="row">




    </div>

</div>


@section Scripts{
    <script>

        $(function () {



        });

    </script>
}